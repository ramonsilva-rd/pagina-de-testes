/*! Resultados Digitais - Wed Apr 28 2021 10:58:59 GMT-0300 (-03) */
"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RDStationFormIntegration(e,n,t){RdIntegration.integrate(e,n,t)}var FormFields=function(){function e(e){for(var n=[],t=0;t<e.length;t+=1)n.push(e[t]);return n}function n(e,n,t){var r=t(n,e),o=e.value,i=e.dataset.sensitive,a=SensitiveDataFilter.filter([{name:r,value:o,sensitive:i}]);return console.log("allowedFieldsFilter",{name:r,value:o,sensitive:i},"Result",a.length),a.length>0}function t(t,r){var o=jQuery(t).find(":input").not(":password"),i=e(o),a=i.filter(function(e,t){return n(e,t,r)});return jQuery(a).serializeArray()}function r(e){return e.replace(/[\s_-]/g,"").toLowerCase().indexOf("email")>-1}function o(e){var n=!1,t=e.type;return t&&(n="email"===t),r(e.name)||n}function i(e){var n=!1;return jQuery.each(e,function(){if(o(this)&&""!==this.value)return this.name="email",n=!0,!1}),n}function a(t,r){return e(jQuery(t).find(":input").not(":password").not(":submit").not(":button").not(":reset").not(":checkbox").not(":radio").not('select[multiple="multiple"]')).filter(function(e,t){return n(e,t,r)})}return{findEmail:i,singleFields:a,retrieveAllowedFields:t}}(),RDErrorNotifier=function(){function e(n,t){_classCallCheck(this,e),this.requestStatus=n,this.requestBody=t}return _createClass(e,[{key:"notify",value:function(){var e=JSON.stringify({status:this.requestStatus,body:this.requestBody});jQuery.ajax({type:"POST",url:this.URL,data:e,dataType:"json",crossDomain:!0})}}]),e}();RDErrorNotifier.prototype.URL="https://qtmlugypw3.execute-api.us-east-1.amazonaws.com/production";var RDIntegrationCookieConsent=function(){function e(e){if(null===window.RDCookieControl.configuration)return e;if(!r())return e;var n={analytics:window.RDCookieControl.analytics.track,functional:window.RDCookieControl.functional.track,banner_type:window.RDCookieControl.configuration.type};return e.push({name:"privacy_data[browser]",value:JSON.stringify(n)}),e}var n=["cookieconsent_status_ANALYTICS","cookieconsent_status_ESSENTIAL","cookieconsent_status_MARKETING","cookieconsent_status_PERSONALIZATION","cookieconsent_status_UNCATEGORIZED"],t=function(e){return document.cookie.split(";").some(function(n){return 0===n.trim().indexOf("".concat(e,"="))})},r=function(){return n.some(t)};return{insertCookieConsentData:e}}();"undefined"!=typeof module&&module.hasOwnProperty("exports")&&(module.exports=RDIntegrationCookieConsent);var RDIntegrationCreditCard=function(){function e(e){var n,t,r,o=0,i=0;if("string"!=typeof e)return!1;if(t=e.replace(/\D/g,""),(r=t.length)<14)return!1;for(;r--;)n=parseInt(t.charAt(r),10)<<i,o+=n-9*(n>9),i^=1;return o%10==0&&o>0}return{validNumber:e}}(),SensitiveDataFilter=function(){function e(e){return RDIntegrationCreditCard.validNumber(e.value)}function n(e,n){return n.test(e.name)}function t(e){return new RegExp(e.join("|"),"i")}function r(r){var i=t(o);return r.filter(function(e){return"true"!==e.sensitive}).filter(function(n){return!1===e(n)}).filter(function(e){return!1===n(e,i)})}var o=["captcha","_wpcf7","_wpnonce","_viewstate","_previouspage","_viewstategenerator","creditcard","credit_card","credit_number","cardnumber","cvv","cvc","securitycode","pagseguro","cielo","pagarme","billing","erede_api","cartao_credito","cartaocredito","cart√£o","checkout","rede_credit","cardholder"];return{filter:r}}();"undefined"!=typeof module&&module.hasOwnProperty("exports")&&(module.exports={RDIntegrationCreditCard:RDIntegrationCreditCard,SensitiveDataFilter:SensitiveDataFilter});var RDIntegrationDataPrivacy=function(){function e(e){return jQuery(e).is("[data-privacy]")}function n(n){return e(n)&&jQuery(n).is(":checkbox")}function t(e){var n=[];return e.find("[data-privacy]:checkbox[name]").clone().each(function(e,t){t.value=Number(t.checked),n.push(t)}),n}return{isPrivacyCheckboxField:n,findDataPrivacyCheckboxesFields:t}}();"undefined"!=typeof module&&module.hasOwnProperty("exports")&&(module.exports=RDIntegrationDataPrivacy);var FieldMapping=function(){function e(){f=[]}function n(e){var n,t,r=e.getAttribute("name"),o=/\[/g,i=/\]/g;return!!r&&(n=r.replace(o,"_"),t=n.replace(i,""),RDIntegrationDataPrivacy.isPrivacyCheckboxField(e)?t:"checkbox"===e.type?"".concat(t,"[]"):t)}function t(e){var n=jQuery('label[for="'+e.id+'"]')[0],t=jQuery(e).closest("label")[0],r=n||t;return!!r&&r.innerText.trim()}function r(e,r){var o=r.getAttribute("type"),i="Field "+e+" "+o;return n(r)||t(r)||r.getAttribute("id")||i}function o(e){return"string"==typeof e?e.slice(0,255):e}function i(e){jQuery(e).map(function(e,n){return f.push({name:r(e,n),value:o(n.value),type:n.type}),!1})}function a(e){i(FormFields.singleFields(e[0],r))}function u(e){var n=e.find(":checkbox:checked[name]:not([data-privacy])").clone();n.each(function(e,n){n.name=n.name.split(".")[0]}),i(n)}function c(e){i(RDIntegrationDataPrivacy.findDataPrivacyCheckboxesFields(e))}function s(e){i(e.find(":radio:checked"))}function l(n){return e(),a(n),u(n),c(n),s(n),f}var f=[];return{mapFields:l,truncateStringValue:o,findFieldName:r}}(),RdIntegrationIdentifier=function(){function e(e){var n=e[0].action;return"object"===_typeof(n)?n.value:void 0!==n?n:""}function n(n){var t,r=!1,o=["squarespace.com","realty_ajax_shortcode_contact_form"];for(t=0;t<o.length;t+=1)e(n).indexOf(o[t])>-1&&(r=!0);return r}function t(e){return!n(e)&&e.attr("id")}function r(e){var n="/"===window.location.pathname?"home":window.location.pathname,r=e.attr("name")||t(e)||n;return FieldMapping.truncateStringValue(r)}return{identifier:r}}(),RdIntegration=function(){var e,n,t,r,o,i,a=function(e){"undefined"==typeof jQuery?s("https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js",e):e()},u=function(e,n,t){a(function(){i=jQuery,c(e,n,t),l(),R()})},c=function(e,o,i){r=i||{},n=e,t=o},s=function(e,n){var t=document.getElementsByTagName("head")[0],r=document.createElement("script");r.type="text/javascript",r.src=e,r.onload=n,r.onreadystatechange=function(){"complete"===this.readyState&&n()},t.appendChild(r)},l=function(){i(":submit").click(f)},f=function(n){if(o=h(),e=d(n.target)){var t=FormFields.retrieveAllowedFields(e,FieldMapping.findFieldName);if(FormFields.findEmail(t)){var r=m(t);("function"!=typeof e[0].checkValidity||e[0].checkValidity())&&(w(r,g),n.preventDefault())}}},d=function(e){return i(e).closest("form:not([data-internal-rdstation-form])")},m=function(e){var n=p(e);return n.push(o.identifier,o.token,_()),n},p=function(e){return r.fieldMapping&&(e=v(e)),e},v=function(e){return i.each(e,function(){var e=r.fieldMapping[this.name];e&&(this.name=e)}),e},g=function(){y(e)?e.submit():e.find(":submit").unbind("click",f).click()},y=function(e){var n=e.attr("action");return void 0!==n&&""!==n.trim()},h=function(){return{identifier:{name:"identificador",value:t},token:{name:"token_rdstation",value:n}}},b=function(e){var n,t,r=document.cookie.split(";");for(e+="=",n=0;n<r.length;n++){for(t=r[n];" "===t.charAt(0);)t=t.substring(1,t.length);if(0===t.indexOf(e))return t.substring(e.length,t.length)}return null},_=function(){return{name:"query_params",value:location.search.substring(1)}},k=function(){var e=b("rdtrk");if(null!==e)return e=JSON.parse(unescape(e)),e.id},C=function(e){var n=k();return void 0!==n&&e.push({name:"client_id",value:n}),e},F=function(e){var n=b("__utmz"),t=b("__trf.src");return n&&e.push({name:"c_utmz",value:n}),t&&e.push({name:"traffic_source",value:t}),e},D=function(e,n){return e.push({name:"_is",value:n}),e},w=function(e,n,t){var r,o;t=t||3,r=10===t?"form-integrations":"conversions",e=C(e),e=F(e),e=D(e,t),e=RDIntegrationCookieConsent.insertCookieConsentData(e),a(function(){jQuery.ajax({type:"POST",url:"https://app-staging.rdstation.com.br/api/1.3/"+r,data:e,crossDomain:!0,xhrFields:{withCredentials:!0},warn:function(e){console.log("ERROR - "),console.log(e)},complete:function(t,r){if(t.status>=500)return o=new RDErrorNotifier(t.status,e),void o.notify();n&&n(t,r)},beforeSend:function(){}})})},R=function(){!0===r.debugMode&&I()},I=function(){a(function(){i=jQuery,r=r||{},console.info("Iniciando");var e=i(_getElementSubmit()),n=d(e);0===e.length?console.warn("Nenhum botao de submit encontrado"):console.info("Botoes de submit encontrados: "+e.length),0===n.length?console.warn("Nenhum formulario encontrado"):console.info("Formularios encontrados: "+n.length),S(n),console.info("Finalizado")})},S=function(e){o=h(),i.each(e,function(e,n){var t=m(n),r=[];console.log(""),console.info(e+1+" formulario"),FormFields.findEmail(n)?console.info("Campo de email encontrado"):console.warn("Campo de email nao encontrado"),i.each(t,function(e,n){r.push(n.name)}),console.info("Campos mapeados: "+r.join(", "))}),console.log("")},j=function(e,t){r=t||{},n=e,a(function(){localStorage.getItem("RdIntegrationFormData")&&Q(),x()})},x=function(){var e=jQuery('form:not(:has(input[name="internal_source"],input[name="_is"]))');jQuery(e).submit(N)},N=function(e){var n=jQuery(e.target).closest("form"),r=FieldMapping.mapFields(n);FormFields.findEmail(r)&&(t=RdIntegrationIdentifier.identifier(n),E(r))},E=function(e){e=O(e),P(e),w(e,function(e){A(e)},10)},O=function(e){return e.push({name:"identificador",value:t},{name:"token_rdstation",value:n},{name:"form_url",value:location.href.split("?")[0]},{name:"page_title",value:document.title}),e},P=function(e){localStorage.setItem("RdIntegrationFormData",JSON.stringify(e))},Q=function(){var e=JSON.parse(localStorage.getItem("RdIntegrationFormData"));w(e,function(e){A(e)},10)},A=function(e){4===e.readyState&&localStorage.removeItem("RdIntegrationFormData")};return{integrate:u,post:w,analyse:I,integrateAll:j}}();